{
    "contents" : "\n\n**From the RStudio-Server page:**  \nRStudio Server enables you to provide a browser based interface (the RStudio IDE) to a version of R running on a remote Linux server. Deploying R and RStudio on a server has a number of benefits, including:\n\n- The ability to access your R workspace from any computer in any location;\n- Easy sharing of code, data, and other files with colleagues;\n- Allowing multiple users to share access to the more powerful compute resources (memory, processors, etc.) available on a well equipped server; and\n- Centralized installation and configuration of R, R packages, TeX, and other supporting libraries.  \n<https://support.rstudio.com/hc/en-us/articles/200552306-Getting-Started>\n\n\nThere is documentation on setting up a VM running RStudio-server from scratch on the NeCTAR support page <https://support.nectar.org.au/support/solutions/articles/6000098750-pawsey-installing-r-and-rstudio-in-the-cloud> \n\nThis workshop will involve launching a VM using an image in which most of the set-up and installation is already done.  Most of the steps in setting up the image are the same as the steps outlined in the documentation, and a quick list of the commands used in setting up the image is included in the appendices of this guide.\n\nBy launching a VM with a prepared image, we can skip many of the steps that require some familiarity with BASH commands, and we can access RStudio almost immediately.\n\n## Launch a virtual machine with pre-installed RStudio-Server\n\n1. Log on to the NeCTAR dashboard <https://dashboard.rc.nectar.org.au/project>\n1. Select the correct project allocation in the top bar (if it starts with \"pt- \", it is your default trial allocation)\n1. Select \"**Access & Security**\" under the \"Compute\" subheading in the left side main menu.\n    1. Click \"Create Security Group\" \n    1. Name the security group 'RStudioServer', with the description \"port 8787 and 22\". Click \"Create Security Group\"\n    1. Click \"**Manage Rules**\" in the \"Actions\" drop-down menu. \n    1. Click \"**Add Rule**\". Type \"**8787**\" under \"**Port**\". Under \"**CIDR**\", you choose a range of IP adresses that can access your VM through port 8787 (password protected). If you keep it as \"0.0.0.0/0\", you can access your VM from any computer, but anyone else might find a way to access it also. Here are the IP ranges for SA University networks. Use one of these, and the VM can only be accessed form a University computer (including an external computer using a VPN to access the University network).\n        - 129.127.0.0/16 - University of Adelaide\n        - 129.96.0.0/16 - Flinders\n        - 130.220.0.0/16 - UniSA \n    1. Repeat the last step for port \"**22**\" (which allows SSH access to the VM)\n    1. Select \"**Key Pairs**\" and use \"**Import Key Pair**\" to upload the public key of a keypair you have created in Putty (Windows users) or with `ssh-keygen -f ~/.ssh/keyname`. See <https://support.nectar.org.au/support/solutions/articles/6000055376-launching-virtual-machines> for instructions on setting up keypairs.\n1. Select \"**Images**\" in the left side main menu. Click the \"**Public**\" tab at the top of the window.\n1. Find the image named \"**Rstudio_server_eRSA_Jan2016**\" and select \"**Launch Instance**\" from the \"Actions\" drop-down menu.\n1. Give your VM a name and choose a \"**Flavor**\" (size of the VM).\n1. Select the \"**Access & Security**\" tab. Select your Key Pair name, and select the \"**RStudioServer**\" security group you just created.\n1. If you might use a volume storage attachment at some point, select the \"**Availability Zone**\" and choose \"**sa**\" from the drop-down menu.\n1. Click \"**Launch**\". It may take a few minutes for the instance to boot.\n\n## Connect to the VM with SSH\n\nSee the support page:  \n<https://support.nectar.org.au/support/solutions/articles/6000055446-accessing-instances>  \n\nCopy the IP Address of the instance from the NeCTAR dashboard.\n  - Windows - Set up a PuTTY connection with the IP address\n  - Mac/Linux - In the terminal app, enter `ssh -i <keyname> ubuntu@<IPaddress>`\n\n\n## Set up the RStudio-Server VM\n\nThere are a few shell commands that need to be run on the Instance after it has been launched as an initial set-up step.\n\nIf you are attaching a **Volume** storage block (highly recommended) to the VM, you should mount the storage to \"**/mnt**\" before performing the next step.  \nFollow instructions <http://training.nectar.org.au/package07/sections/volumeStorage.html>\n\nUse the following commands to learn about your VM disc structure:  \n`lsblk ` , `df -hT ` , `htop `\n\nTo complete set-up, run the command:  \n`bash Startup_Script.sh`\n\nYou will be prompted to provide a password for user: \"ubuntu\" . This password will be used to access the RStudio-Server through a web browser.\n\nThis script ensures the storage disc mounted at /mnt is writable, and provides a symbolic link to this disc in the home directory. The pre-installed RStudio-Server is started. The shell script then deletes itself as it is designed to only run once, at set-up.\n\n        The commands to check the status and run RStudio-server are:  \n        `sudo rstudio-server verify-installation`  \n        `sudo rstudio-server status`  \n        `sudo rstudio-server restart`  \n        `sudo rstudio-server start`  \n        `sudo rstudio-server stop`  \n\n## Access RStudio in your web browser\n\nIn the address bar of your web browser, paste the IP address of your VM (fromt the NeCTAR dashboard: Instances page) followed by \":8787\".  \n`XXX.XXX.XXX.XXX:8787`\n\nThis should bring up the RStudio login window.\nEnter the user : ubuntu  \nand the password you set up.\n\n\nsudo rstudio-server verify-installation\nsudo rstudio-server status\nsudo rstudio-server restart\nsudo rstudio-server start\nsudo rstudio-server stop\n\n\n\n        sudo chown ubuntu /mnt\n        ln -s /mnt ~/Mounted_Storage\n        sudo passwd ubuntu\n        \n        \n        sudo nano /etc/apt/sources.list\n        sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9\n        sudo apt-get update\n        sudo apt-get install r-base\n        sudo chown ubuntu /usr/local/lib/R/site-library\n        sudo apt-get install gdebi-core\n        wget https://download2.rstudio.org/rstudio-server-0.99.489-amd64.deb\n        sudo gdebi rstudio-server-0.99.489-amd64.deb\n        rm rstudio-server-0.99.489-amd64.deb \n        sudo apt-get install texlive\n        sudo apt-get install libcurl4-openssl-dev\n        \n        cd Mounted_Storage\n        mkdir R\n        \n        \n        \n        \n        install.packages(\"swirl\")\n        library(swirl)\n        swirl()\n\n        install_from_swirl(\"Getting and Cleaning Data\")\n\n\nsudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9\n\n\nsudo nano /etc/apt/sources.list\ndeb http://cran.ms.unimelb.edu.au/bin/linux/ubuntu trusty/\n\n`sudo apt-get update`\n\n`sudo apt-get install r-base`\n##`sudo apt-get install r-base-dev`\n\nsudo chown ubuntu /usr/local/lib/R/site-library\n\n`wget https://download2.rstudio.org/rstudio-server-0.99.489-amd64.deb`\n`sudo apt-get install gdebi-core`\n`sudo gdebi rstudio-server-0.99.489-amd64.deb`\n\n\n`sudo rstudio-server verify-installation`\n\nhttps://www.rstudio.com/products/rstudio/download-server/\n\nhttp://cran.ms.unimelb.edu.au/\ndeb https://<my.favorite.cran.mirror>/bin/linux/ubuntu trusty/\ndeb http://cran.ms.unimelb.edu.au/bin/linux/ubuntu trusty/\n/etc/apt/sources.list\n\nsudo nano /etc/apt/sources.list\n\n\n??\nsudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E084DAB9\nsudo apt-key del E084DAB9\n\n\nhttp://<server-ip>:8787\n\n\n#troubleshooting\n\nless /var/log/syslog \nsudo rstudio-server license-manager status\nsudo rstudio-server verify-installation\nsudo rstudio-server status\nsudo rstudio-server restart\nsudo rstudio-server start\nsudo rstudio-server stop\n\nsudo apt-get install texlive\n\nsudo chown ubuntu /usr/local/lib/R/site-library\n\n\nhttps://support.nectar.org.au/support/solutions/articles/6000098750-pawsey-installing-r-and-rstudio-in-the-cloud\n\n\n#! /bin/bash\n\nsudo chown ubuntu /mnt\nsudo chown ubuntu /usr/local/lib/R/site-library\nln -s /mnt ~/Mounted_Storage\nsudo passwd ubuntu\nsudo rstudio-server verify-installation\ncd Mounted_Storage\nmkdir R\necho \"Set-up is complete. Deleting Startup_Script.sh\nwait && rm Startup_Script.sh\n\n\nsudo apt-get install texlive-latex-extra\n",
    "created" : 1452125590142.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3269419407",
    "id" : "52A4FD06",
    "lastKnownWriteTime" : 1453078519,
    "path" : "~/Desktop/Link to RstudioServer/RStudio-server.md",
    "project_path" : "RStudio-server.md",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "markdown"
}